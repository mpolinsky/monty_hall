<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <link rel="stylesheet" type="text/css" href="monty_style.css" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>the monty hall problem</title>
    </head>
    <body>  
        <div class="cont">
            <p id="choice"></p>
            <p id="monty"></p>
            <p class="instructions_1" id="inst1">
                Click a door and hope the best<br>
                One's a prize, and none the rest!
            </p>
            <p class="instructions_2" id="inst2">
                The host removes their losing door, leaving only one...
            </p>
           
            <div class="door_container" id="doors">
                <div class="door" id="no_1" value="1">
                    1
                </div>
                <div class="door" id="no_2" value="2">
                    2
                </div>
                
                <div class="door" id="no_3" value="3">
                    3
                </div>
            </div>
            <p class="instructions_3" id="inst3">
                Stay with your choice?  Or switch with the host?
            </p>
            <div class="results" id="results">
               
            </div>

            <div class="btn-pnl">
            <button class="switch" id="sw">Switch</button>
            <button class="finish" id="fin">Stay</button>
            </div>
            <p class="welcome" id="welc">Welcome to a classic game and probability conundrum!</p>
        <button id="button_A">Let's Begin</button>
        <h3 id="heading_A"></h3>
        <button class="restart" id="rst">restart</button>
        </div>
        
    </body>


    <script>
        const buttonA = document.querySelector('#button_A');
        const headingA = document.querySelector('#heading_A');
        const door_no1 = document.querySelector('#no_1');
        const door_no2 = document.querySelector('#no_2');
        const door_no3 = document.querySelector('#no_3');
        const sw_btn = document.querySelector('#sw');
        const sty_btn = document.querySelector("#fin");
        const restart_btn = document.querySelector("#rst");
        var winner = (Math.floor(Math.random()*10)%3)+1;
        const welcome = document.querySelector('.welcome');
        const i1 = document.querySelector('#inst1');
        const i2 = document.querySelector('#inst2');
        const i3 = document.querySelector('#inst3');

        headingA.innerHTML = winner;


        buttonA.addEventListener("click", function(){
        document.querySelector(".door_container").style.display = "flex";
        buttonA.style.display = "none";
        welcome.style.display = "none";
        i1.style.display= "flex";

        }, {once:true});
        
        door_no1.addEventListener("click", eliminate_d1);
        door_no2.addEventListener("click", eliminate_d2);
        door_no3.addEventListener("click", eliminate_d3);
        
        sw_btn.addEventListener("click", switch_door, {once:true});
        sty_btn.addEventListener("click", reveal);

        restart_btn.addEventListener("click", restart);

        function restart(){
            window.location.reload();
        }

        function reveal(winner){
            i2.style.display = "none";
            i3.style.display = "none";
            let res = document.getElementById("results");
            res.style.display = "flex";
            let doors = document.getElementById('doors');
            doors.style.display = 'none';
            sw_btn.style.display = "none";
            sty_btn.style.display = "none";

            if(Number(document.getElementById('heading_A').innerHTML) == Number(document.getElementById("choice").innerHTML)){
                res.innerHTML = "WINNER!!!";
            }
            else{
                res.innerHTML = "Bad Luck, You Lose!";
            }
            document.getElementById('rst').style.display = "flex";
        }

        function switch_door(){
            // Switch your choice
            let temp = document.getElementById("choice").innerHTML;
            document.getElementById("choice").innerHTML = document.getElementById("monty").innerHTML;
            document.getElementById("monty").innerHTML = temp;
            document.getElementById("fin").innerHTML = "Reveal!";
            document.getElementById("sw").style.display = "none";
        }

        function eliminate_d1(){
            document.getElementById("choice").innerHTML = door_no1.innerHTML
            i1.style.display = "none";
            i2.style.display = "flex";
            i3.style.display = "flex";
            // flip a coin to select a door to eliminate then return that
            if (winner == 1){
                if(Math.floor(Math.random()*10)%2==0){
                    door_no2.style.display="none";
                    document.getElementById("monty").innerHTML = door_no3.innerHTML
                }
                else{
                    door_no3.style.display="none";
                    document.getElementById("monty").innerHTML = door_no2.innerHTML
                }
            }
            else if(winner == 2){
                door_no3.style.display="none";
                document.getElementById("monty").innerHTML = door_no2.innerHTML
            }
            else{
                door_no2.style.display="none";
                document.getElementById("monty").innerHTML = door_no3.innerHTML
            }
            sw_btn.style.display = "flex";
            sty_btn.style.display = "flex";

            door_no1.removeEventListener("click", eliminate_d1);
            door_no2.removeEventListener("click", eliminate_d2);
            door_no3.removeEventListener("click", eliminate_d3);
        }

        function eliminate_d2(){
            i1.style.display = "none";
            i2.style.display = "flex";
            i3.style.display = "flex";
            document.getElementById("choice").innerHTML = door_no2.innerHTML
            // flip a coin to select a door to eliminate then return that
            if (winner == 2){
                if(Math.floor(Math.random()*10)%2==0){
                    door_no1.style.display="none";
                    document.getElementById("monty").innerHTML = door_no3.innerHTML
                }
                else{
                    door_no3.style.display="none";
                    document.getElementById("monty").innerHTML = door_no1.innerHTML
                }
            }
            else if(winner == 1){
                door_no3.style.display="none";
                document.getElementById("monty").innerHTML = door_no1.innerHTML
            }
            else{
                door_no1.style.display="none";
                document.getElementById("monty").innerHTML = door_no3.innerHTML
            }

            sw_btn.style.display = "flex";
            sty_btn.style.display = "flex";


            door_no1.removeEventListener("click", eliminate_d1);
            door_no2.removeEventListener("click", eliminate_d2);
            door_no3.removeEventListener("click", eliminate_d3);
        }

        function eliminate_d3(){
            i1.style.display = "none";
            i2.style.display = "flex";
            i3.style.display = "flex";
            document.getElementById("choice").innerHTML = door_no3.innerHTML
            // flip a coin to select a door to eliminate then return that
            if (winner == 3){
                if(Math.floor(Math.random()*10)%2==0){
                    door_no2.style.display="none";
                    document.getElementById("monty").innerHTML = door_no1.innerHTML
                }
                else{
                    door_no1.style.display="none";
                    document.getElementById("monty").innerHTML = door_no2.innerHTML
                }
            }
            else if(winner == 2){
                door_no1.style.display="none";
                document.getElementById("monty").innerHTML = door_no2.innerHTML
            }
            else{
                door_no2.style.display="none";
                document.getElementById("monty").innerHTML = door_no1.innerHTML
            }

            sw_btn.style.display = "flex";
            sty_btn.style.display = "flex";


            door_no1.removeEventListener("click", eliminate_d1);
            door_no2.removeEventListener("click", eliminate_d2);
            door_no3.removeEventListener("click", eliminate_d3);
        }

        
        function elim_door(d1, d2){
            // flip a coin to select a door to eliminate then return that
            if (Math.floor(Math.random()*10)%2==0){
                d2.style.display="none";
            }
            else{
                d1.style.display="none";
            }
       }
        </script>
    </html>